<!DOCTYPE html>
<html>
<head>
  <title>VisionMeter</title>

  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom right, #8be7e0, #0a9ea1);
      font-family: Poppins, Arial, sans-serif;
      display: flex; justify-content:center; align-items:center; height:100vh;
    }

    .screen {
      display:none;
      background:white;
      width:450px; padding:30px;
      border-radius:16px;
      box-shadow:0px 8px 25px rgba(0,0,0,0.25);
      text-align:center;
    }

    .fade-in { animation: fadeIn .6s ease forwards; opacity:0; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }

    #logo { width:150px; margin-bottom:12px; }

    .fancy-tagline {
      background:linear-gradient(to right,#0077b6,#00b4d8,#48cae4);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      font-weight:600; font-size:17px;
    }

    .handwriting {
      font-family:'Shadows Into Light',cursive;
      font-size:19px; color:#006b78; line-height:1.6;
    }

    button {
      padding:12px 22px; border:none; border-radius:8px;
      background:#0aa6a8; color:white; font-size:16px;
      margin-top:18px; cursor:pointer; transition:0.3s;
    }
    button:hover { background:#087f81; }

    .button-row { display:flex; justify-content:space-between; width:100%; margin-top:20px; }
    .button-row button { width:48%; }

    #letter { margin:30px 0; font-weight:bold; text-align:center; }

    #downloadBtn {
      display:none; padding:12px 25px; border-radius:30px;
      background:linear-gradient(to right,#0077b6,#00b4d8);
      color:white; box-shadow:0 4px 12px rgba(0,180,216,.4);
    }

    /* Color Test Grid */
    #colorTestGrid { display:grid; justify-content:center; gap:10px; margin-top:20px; }

    .bubble { width:55px; height:55px; border-radius:50%; box-shadow:0 3px 6px rgba(0,0,0,0.25); cursor:pointer; position:relative; overflow:hidden; }
    .bubble::after { content:""; position:absolute; width:0;height:0;background:rgba(255,255,255,0.6); top:50%; left:50%; border-radius:50%; transform:translate(-50%,-50%); opacity:0; }
    .bubble.ripple::after { animation:bubbleRipple .45s ease-out forwards; }
    @keyframes bubbleRipple {0%{width:0;height:0;opacity:.7;}100%{width:140%;height:140%;opacity:0;}}

    /* ‚úÖ FINAL RESULT BOX */
    #resultBox {
      margin-top: 20px;
      background: #ffffff;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0px 8px 25px rgba(0,0,0,0.25);
      font-family: 'Poppins', sans-serif;
      text-align: center;
      display: none;
    }
    #resultBox h2 { margin-bottom: 10px; font-size: 22px; color: #006b78; }
    #resultBox p { font-size: 16px; margin: 6px 0; }

  </style>
</head>

<body>

<!-- Page 1 -->
<div class="screen fade-in" id="welcomeScreen" style="display:block;">
  <img id="logo" src="visionmeter_logo.png">
  <h2>Welcome to VisionMeter</h2>
  <p class="fancy-tagline">Your friendly eye clarity screening tool</p>
  <button onclick="goToModeSelect()">Start</button>
</div>

<!-- Page 2 -->
<div class="screen fade-in" id="modeScreen">
  <h2>Select Test Mode</h2>
  <p class="handwriting">Choose what you want to test üòä</p>
  <div class="button-row">
    <button onclick="showGuidelines()">Vision Test üëÅÔ∏è</button>
    <button onclick="showColorTest()">Color Test üé®</button>
  </div>
</div>

<!-- Guidelines -->
<div class="screen fade-in" id="guidelineScreen">
  <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_touohxv0.json" background="transparent" speed="1" loop autoplay style="width:140px;"></lottie-player>
  <h2>Before You Start</h2>
  <div class="handwriting">
      ‚Ä¢ Ensure lighting is comfortable.<br>
      ‚Ä¢ Blink often to avoid dryness.<br>
      ‚Ä¢ Keep screen brightness moderate.<br>
      ‚Ä¢ Sit relaxed and look straight.<br>
      ‚Ä¢ Take breaks if eyes feel strained.<br>
  </div>
  <button onclick="startVisionTest()">Continue</button>
</div>

<!-- Vision Test -->
<div class="screen fade-in" id="testScreen">
  <h1>Vision Test</h1>
  <p id="instruction" class="handwriting">Cover your LEFT eye</p>

  <div class="button-row">
    <button id="startBtn">Start Test</button>
    <button id="voiceBtn">üé§ Speak Letter</button>
  </div>

  <div id="letter" style="display:none;"></div>
  <input type="text" id="input" placeholder="Type letter & press Enter" style="display:none;">

  <!-- ‚úÖ Stylish Result Box -->
  <div id="resultBox"></div>

  <button id="downloadBtn">Download PDF Report</button>
</div>

<!-- Color Test -->
<div class="screen fade-in" id="colorTestScreen">
  <h1>Color Vision Test üé®</h1>
  <p class="handwriting">Tap the bubble that looks different.</p>
  <div id="colorTestGrid"></div>
</div>

<script src="script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
