<!DOCTYPE html>
<html>
<head>
  <title>VisionMeter</title>

  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom right, #8be7e0, #0a9ea1);
      font-family: Poppins, Arial, sans-serif;
      display: flex; justify-content:center; align-items:center; height:100vh;
    }
    .screen { display:none; background:white; width:450px; padding:30px; border-radius:16px; box-shadow:0px 8px 25px rgba(0,0,0,0.25); text-align:center; }
    .fade-in { animation: fadeIn .6s ease forwards; opacity:0; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }
    #logo { width:150px; margin-bottom:12px; }
    .fancy-tagline { background:linear-gradient(to right,#0077b6,#00b4d8,#48cae4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:600; font-size:17px; }
    .handwriting { font-family:'Shadows Into Light',cursive; font-size:19px; color:#006b78; line-height:1.6; }
    button { padding:12px 22px; border:none; border-radius:8px; background:#0aa6a8; color:white; font-size:16px; margin-top:18px; cursor:pointer; transition:0.3s; }
    button:hover { background:#087f81; }
    .button-row { display:flex; justify-content:space-between; width:100%; margin-top:20px; }
    .button-row button { width:48%; }
    #colorTestGrid { display:grid; justify-content:center; gap:10px; margin-top:20px; }
    .bubble { width:55px; height:55px; border-radius:50%; box-shadow:0 3px 6px rgba(0,0,0,0.25); cursor:pointer; }

    /* Extra Tests */
    .test-card {
      background: white; padding: 14px; margin: 10px auto; width: 260px;
      border-radius: 14px; font-size: 20px; cursor: pointer;
      transition: 0.25s; border: 2px solid #222;
    }
    .test-card:hover { transform: scale(1.07); background: #fffae6; }
    .back-btn { margin-top: 18px; padding: 10px 18px; background:#0a98f0; color:#fff; border-radius:8px; border:none; cursor:pointer; }
  </style>
</head>

<body>

<!-- Welcome -->
<div class="screen fade-in" id="welcomeScreen" style="display:block;">
  <img id="logo" src="visionmeter_logo.png">
  <h2>Welcome to VisionMeter</h2>
  <p class="fancy-tagline">Your friendly eye clarity screening tool</p>
  <button onclick="goToModeSelect()">Start</button>
</div>

<!-- Mode Screen -->
<div class="screen fade-in" id="modeScreen">
  <h2>Select Test Mode</h2>
  <p class="handwriting">Choose what you want to test ğŸ˜Š</p>
  <div class="button-row">
    <button onclick="showGuidelines()">Vision Test ğŸ‘ï¸</button>
    <button onclick="showColorTest()">Color Test ğŸ¨</button>
  </div>

  <!-- âœ… New Feature Menu -->
  <button onclick="showExtraTests()">ğŸ” More Eye Tests</button>
</div>

<!-- Guidelines -->
<div class="screen fade-in" id="guidelineScreen">
  <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_touohxv0.json" background="transparent" speed="1" loop autoplay style="width:140px;"></lottie-player>
  <h2>Before You Start</h2>
  <div class="handwriting">
    â€¢ Ensure lighting is comfortable.<br>
    â€¢ Blink often to avoid dryness.<br>
    â€¢ Keep screen brightness moderate.<br>
    â€¢ Sit relaxed and look straight.<br>
    â€¢ Take breaks if eyes feel strained.<br>
  </div>
  <button onclick="startVisionTest()">Continue</button>
</div>

<!-- Vision Test -->
<div class="screen fade-in" id="testScreen">
  <h1>Vision Test</h1>
  <p id="instruction" class="handwriting">Cover your LEFT eye</p>
  <div class="button-row">
    <button id="startBtn">Start Test</button>
    <button id="voiceBtn">ğŸ¤ Speak Letter</button>
  </div>
  <div id="letter" style="display:none;"></div>
  <input type="text" id="input" placeholder="Type letter & press Enter" style="display:none;">
  <div id="resultBox"></div>
  <button id="downloadBtn" style="display:none;">Download PDF Report</button>
</div>

<!-- Color Test -->
<div class="screen fade-in" id="colorTestScreen">
  <h1>Color Vision Test ğŸ¨</h1>
  <p class="handwriting">Tap the bubble that looks different.</p>
  <button id="startColorBtn">Start Color Test</button>
  <div id="colorTestGrid"></div>
</div>

<!-- âœ… Extra Tests Menu -->
<div class="screen fade-in" id="extraTestsScreen" style="display:none;">
  <h1>More Eye Tests ğŸ‘€</h1>
  <p class="handwriting">Choose a test to begin:</p>

  <div class="test-card" onclick="startAstigmatismTest()">ğŸ¤“ Astigmatism Test</div>
  <div class="test-card" onclick="startContrastTest()">ğŸ¼ Contrast Vision Test</div>
  <div class="test-card" onclick="startVisualFieldTest()">ğŸ¦Š Visual Field Test</div>

  <button onclick="showExtraTestSummary()">âœ… View Combined Result</button>
  <button class="back-btn" onclick="goToModeSelect()">â¬… Back</button>
</div>



<div class="screen fade-in" id="astigmatismScreen" style="display:none;">
  <h2>ğŸ¤“ Astigmatism Test</h2>
  <img src="astigmatism.png" width="300">
  <p class="handwriting">Do some lines look darker or uneven?</p>
  <button onclick="astigmatismResult='Normal âœ…'; showExtraTests();">All lines look equal</button>
  <button onclick="astigmatismResult='Possible Astigmatism âš ï¸'; showExtraTests();">Yes, some look darker</button>
</div>

<div class="screen fade-in" id="contrastScreen" style="display:none;">
  <h2>ğŸ¼ Contrast Vision Test</h2>
  <img src="contrast.png" width="300">
  <p class="handwriting">Can you distinguish all shades?</p>
  <button onclick="contrastResult='Normal âœ…'; showExtraTests();">Yes, all visible</button>
  <button onclick="contrastResult='Reduced Contrast âš ï¸'; showExtraTests();">Some shades fade</button>
</div>

<div class="screen fade-in" id="visualFieldScreen" style="display:none;">
  <h2>ğŸ¦Š Visual Field Test</h2>
  <p class="handwriting">Tap dots as they appear.</p>
  <div id="vfArea" style="width:300px;height:300px;border:2px solid #222;border-radius:50%;margin:15px auto;position:relative;"></div>
  <button onclick="finishVisualField()">Done</button>
</div>

<div class="screen fade-in" id="extraSummaryScreen" style="display:none;">
  <h2>ğŸ“ Extra Test Summary</h2>
  <p id="extraSummaryText" class="handwriting"></p>
  <button class="back-btn" onclick="showExtraTests()">â¬… Back</button>
</div>

<script src="script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
